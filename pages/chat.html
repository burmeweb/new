<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat - BurmeWeb</title>
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="../assets/css/base.css">
    <link rel="stylesheet" href="../assets/css/layout.css">
    <link rel="stylesheet" href="../assets/css/components.css">
    <link rel="stylesheet" href="../assets/css/theme.css">
    <link rel="stylesheet" href="../assets/css/mobile.css">
    <link rel="stylesheet" href="../assets/css/chat.css">
    
    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Myanmar:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="../assets/img/logo.png">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="navbar-brand">
                <a href="../index.html" class="logo">
                    <img src="../assets/img/logo.png" alt="BurmeWeb Logo">
                    <span>BurmeWeb</span>
                </a>
            </div>
            
            <div class="navbar-menu">
                <a href="feed.html" class="nav-link">
                    <i class="fas fa-home"></i>
                    <span>Feed</span>
                </a>
                <a href="chat.html" class="nav-link active">
                    <i class="fas fa-comment"></i>
                    <span>Chat</span>
                </a>
                <a href="group.html" class="nav-link">
                    <i class="fas fa-users"></i>
                    <span>Groups</span>
                </a>
                
                <!-- User Menu -->
                <div class="user-menu-container" id="userMenu">
                    <!-- Filled by JavaScript -->
                </div>
                
                <!-- Theme Toggle -->
                <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
                    <i class="fas fa-sun"></i>
                    <i class="fas fa-moon"></i>
                </button>
            </div>
            
            <!-- Mobile Menu Toggle -->
            <button class="mobile-menu-toggle" id="mobileMenuToggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
        
        <!-- Mobile Menu -->
        <div class="mobile-menu" id="mobileMenu">
            <a href="feed.html" class="mobile-nav-link">
                <i class="fas fa-home"></i> Feed
            </a>
            <a href="chat.html" class="mobile-nav-link active">
                <i class="fas fa-comment"></i> Chat
            </a>
            <a href="group.html" class="mobile-nav-link">
                <i class="fas fa-users"></i> Groups
            </a>
            <a href="profile.html" class="mobile-nav-link">
                <i class="fas fa-user"></i> Profile
            </a>
            <div class="mobile-menu-divider"></div>
            <button class="mobile-nav-link theme-toggle-mobile" id="themeToggleMobile">
                <i class="fas fa-moon"></i> Dark Mode
            </button>
        </div>
    </nav>

    <!-- Main Chat Container -->
    <main class="chat-container">
        <!-- Chat List Sidebar -->
        <aside class="chat-sidebar" id="chatSidebar">
            <div class="chat-header">
                <h3>Messages</h3>
                <button class="btn btn-sm btn-primary" id="newChatBtn">
                    <i class="fas fa-plus"></i> New
                </button>
            </div>
            
            <div class="chat-search">
                <input type="text" 
                       class="search-input" 
                       placeholder="Search messages..." 
                       id="chatSearch">
            </div>
            
            <div class="chat-list" id="chatList">
                <!-- Chat items will be loaded here -->
            </div>
        </aside>
        
        <!-- Main Chat Area -->
        <div class="chat-main" id="chatMain">
            <!-- Empty State -->
            <div class="chat-empty-state" id="chatEmptyState">
                <div class="chat-empty-icon">
                    <i class="fas fa-comments"></i>
                </div>
                <h3>Your messages</h3>
                <p>Select a conversation or start a new one</p>
                <button class="btn btn-primary mt-3" id="startNewChatBtn">
                    <i class="fas fa-plus"></i> Start New Chat
                </button>
            </div>
            
            <!-- Conversation View (Hidden by default) -->
            <div class="chat-conversation-view" id="chatConversationView" style="display: none;">
                <!-- Conversation Header -->
                <div class="chat-conversation-header">
                    <div class="chat-user-info">
                        <button class="mobile-chat-toggle" id="mobileChatToggle">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <img src="https://randomuser.me/api/portraits/women/44.jpg" 
                             alt="User Avatar" 
                             class="chat-avatar online"
                             id="currentChatAvatar">
                        <div>
                            <div class="chat-user-name" id="currentChatName">Su Su</div>
                            <div class="chat-user-status" id="currentChatStatus">Online</div>
                        </div>
                    </div>
                    
                    <div class="chat-conversation-actions">
                        <button class="chat-action-btn" id="chatInfoToggle">
                            <i class="fas fa-info-circle"></i>
                        </button>
                        <button class="chat-action-btn">
                            <i class="fas fa-phone"></i>
                        </button>
                        <button class="chat-action-btn">
                            <i class="fas fa-video"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Conversation Messages -->
                <div class="chat-conversation" id="chatConversation">
                    <!-- Messages will be loaded here -->
                </div>
                
                <!-- Typing Indicator -->
                <div class="typing-indicator" id="typingIndicator" style="display: none;">
                    <div class="typing-dots">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                    <span id="typingUserName">is typing...</span>
                </div>
                
                <!-- Chat Input -->
                <div class="chat-input-container">
                    <form class="chat-input-form" id="chatForm">
                        <div class="chat-input-actions">
                            <button type="button" class="chat-input-action">
                                <i class="fas fa-smile"></i>
                            </button>
                            <button type="button" class="chat-input-action">
                                <i class="fas fa-paperclip"></i>
                            </button>
                            <button type="button" class="chat-input-action">
                                <i class="fas fa-image"></i>
                            </button>
                        </div>
                        
                        <textarea class="chat-input" 
                                  id="chatInput" 
                                  placeholder="Type a message..." 
                                  rows="1"></textarea>
                        
                        <button type="submit" class="chat-send-btn" id="chatSendBtn">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </form>
                </div>
            </div>
        </div>
        
        <!-- Chat Info Sidebar -->
        <aside class="chat-info-sidebar" id="chatInfoSidebar">
            <div class="chat-info-header">
                <h4>Chat Info</h4>
                <button class="btn btn-sm btn-outline" id="closeChatInfo">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="chat-info-content">
                <div class="chat-info-section">
                    <h4>Media, Links & Docs</h4>
                    <div class="chat-media-grid" id="chatMediaGrid">
                        <!-- Media items will be loaded here -->
                    </div>
                </div>
                
                <div class="chat-info-section">
                    <h4>Participants</h4>
                    <div class="chat-participants" id="chatParticipants">
                        <!-- Participants will be loaded here -->
                    </div>
                </div>
            </div>
        </aside>
    </main>

    <!-- New Chat Modal -->
    <div class="modal" id="newChatModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">New Chat</h4>
                    <button type="button" class="close" data-dismiss="modal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <input type="text" 
                           class="form-control mb-3" 
                           placeholder="Search users..." 
                           id="newChatSearch">
                    
                    <div class="user-list" id="newChatUserList">
                        <!-- Users will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>
    <script src="../config/app.config.js"></script>
    <script src="../assets/js/app.js"></script>
    <script src="../assets/js/auth.js"></script>
    <script src="../assets/js/chat.js"></script>
</body>
  </html>
