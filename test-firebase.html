<!DOCTYPE html>
<html>
<head>
    <title>Test Firebase Setup</title>
</head>
<body>
    <h2>Firebase Setup Test</h2>
    
    <div style="padding: 20px; border: 2px solid #ccc; border-radius: 10px;">
        <h3>Test Registration:</h3>
        <input type="email" id="email" placeholder="Email" style="padding: 8px; margin: 5px;"><br>
        <input type="password" id="password" placeholder="Password" style="padding: 8px; margin: 5px;"><br>
        <input type="text" id="username" placeholder="Username" style="padding: 8px; margin: 5px;"><br>
        <input type="text" id="name" placeholder="Full Name" style="padding: 8px; margin: 5px;"><br>
        <button onclick="testRegister()" style="padding: 10px 20px; margin: 10px;">Test Register</button>
        <button onclick="testLogin()" style="padding: 10px 20px; margin: 10px;">Test Login</button>
        
        <div id="result" style="margin-top: 20px; padding: 10px; background: #f0f0f0; border-radius: 5px;"></div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-database-compat.js"></script>
    
    <script>
        // Initialize Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyDRiJfxoqRfIBfKYE6o7ZdZfIdTEbk7FVU",
            authDomain: "burme-ai-assistant.firebaseapp.com",
            databaseURL: "https://burme-ai-assistant-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "burme-ai-assistant",
            storageBucket: "burme-ai-assistant.firebasestorage.app",
            messagingSenderId: "513378562144",
            appId: "1:513378562144:android:f084f8639b65c62f5c1305"
        };

        try {
            firebase.initializeApp(firebaseConfig);
            console.log("✅ Firebase initialized successfully!");
            document.getElementById('result').innerHTML = "✅ Firebase initialized successfully!";
        } catch (error) {
            console.error("❌ Firebase error:", error);
            document.getElementById('result').innerHTML = "❌ Error: " + error.message;
        }

        // Test functions
        async function testRegister() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const username = document.getElementById('username').value;
            const name = document.getElementById('name').value;
            
            try {
                const userCredential = await firebase.auth().createUserWithEmailAndPassword(email, password);
                const user = userCredential.user;
                
                // Save user data
                await firebase.database().ref('users/' + user.uid).set({
                    email: email,
                    username: username,
                    name: name,
                    createdAt: new Date().toISOString()
                });
                
                document.getElementById('result').innerHTML = 
                    "✅ Registration successful!<br>User ID: " + user.uid;
            } catch (error) {
                document.getElementById('result').innerHTML = 
                    "❌ Registration failed: " + error.message;
            }
        }

        async function testLogin() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            try {
                const userCredential = await firebase.auth().signInWithEmailAndPassword(email, password);
                const user = userCredential.user;
                
                document.getElementById('result').innerHTML = 
                    "✅ Login successful!<br>Welcome: " + user.email;
            } catch (error) {
                document.getElementById('result').innerHTML = 
                    "❌ Login failed: " + error.message;
            }
        }
    </script>
</body>
</html>